<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>Logitech Sustainability Assistant</title>
    <meta name="description" content="Logitech 2025 Impact Report AI Prototype" />
    
    <script src="https://cdn.jsdelivr.net/npm/@stlite/mountable@0.50.0/build/stlite.js"></script>
    
    <style>
      body { margin: 0; background-color: #FFFFFF; font-family: "Segoe UI", Roboto, Helvetica, Arial, sans-serif; }
      #root { height: 100vh; }
      .splash {
        display: flex; flex-direction: column; justify-content: center; align-items: center;
        height: 100vh; background: linear-gradient(180deg, #ffffff 0%, #f1f3f4 100%);
      }
      .logo { font-size: 24px; font-weight: 700; color: #2d3436; letter-spacing: -0.5px; margin-bottom: 15px; }
      .loader {
        width: 40px; height: 40px; border: 4px solid #f3f3f3;
        border-top: 4px solid #00B8FC; border-radius: 50%; animation: spin 1s linear infinite;
      }
      @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
  </head>
  <body>
    <div id="root">
      <div class="splash">
        <div class="logo">logitech | AI Prototype</div>
        <div class="loader"></div>
      </div>
    </div>

    <script>
      stlite.mount({
        requirements: ["streamlit"],
        entrypoint: "app.py",
        files: {
          "app.py": `
import streamlit as st
import time

# 1. PAGE CONFIG (Must be first)
st.set_page_config(
    page_title="LogiSustainability",
    page_icon="üå±",
    layout="wide",
    initial_sidebar_state="expanded"
)

# 2. CSS STYLING (Clean & Modern)
st.markdown("""
    <style>
    /* Fonts */
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap');
    html, body, [class*="css"] { font-family: 'Inter', sans-serif; }
    
    /* Remove default red bar */
    header[data-testid="stHeader"] { display: none; }
    
    /* Sidebar Styling */
    section[data-testid="stSidebar"] { background-color: #f8f9fa; }
    
    /* Chat Message Styling */
    .stChatMessage { background-color: #ffffff; border: 1px solid #f0f2f6; border-radius: 10px; padding: 10px; }
    
    /* Button Styling */
    .stButton button { width: 100%; border-radius: 8px; }
    
    /* Hide Streamlit Footer */
    #MainMenu {visibility: hidden;}
    footer {visibility: hidden;}
    
    /* Header spacing */
    .block-container { padding-top: 2rem; max-width: 900px; }
    </style>
""", unsafe_allow_html=True)

# 3. SIDEBAR
with st.sidebar:
    st.title("üå± Controls")
    st.info("**Prototype Mode**\\nClient-Side Demo (No API Key required)")
    st.markdown("---")
    st.markdown("**Knowledge Base:**\\n2025 Impact Report")
    st.markdown("**Focus Areas:**\\nCarbon, Plastics, DfS")
    st.markdown("---")
    if st.button("Reset Chat"):
        st.session_state.messages = []

# 4. KNOWLEDGE BASE (Simulated RAG)
knowledge_base = {
    "carbon": (
        "### üè∑Ô∏è CarbonClarity‚Ñ¢ (2025)\\n\\n"
        "**Status:** Expanded to Enterprise Portfolio.\\n"
        "We now label products with their specific carbon footprint (kg CO2e). "
        "This transparency allows engineers to benchmark components against our reduction targets during the design phase."
    ),
    "plastic": (
        "### ‚ôªÔ∏è Next Life Plastics\\n\\n"
        "**Goal:** >50% Recycled Content.\\n"
        "By using Post-Consumer Recycled (PCR) plastic in the MX and Ergo lines, we reduce the carbon impact of material sourcing by up to 40% compared to virgin plastic."
    ),
    "dfs": (
        "### ‚öôÔ∏è Design for Sustainability (DfS)\\n\\n"
        "**Strategy:** Low-Power & Dematerialization.\\n"
        "1. **Architecture:** Choosing low-sleep-current ICs.\\n"
        "2. **Materials:** Removing coating/painting to improve recyclability.\\n"
        "3. **Repair:** Modular batteries for extended lifespan."
    ),
    "default": "I can help you find data on **CarbonClarity**, **Next Life Plastics**, or **DfS**. Try asking 'What is CarbonClarity?'"
}

def get_response(prompt):
    p = prompt.lower()
    if "carbon" in p: return knowledge_base["carbon"]
    if "plastic" in p or "recycle" in p: return knowledge_base["plastic"]
    if "dfs" in p or "design" in p: return knowledge_base["dfs"]
    return knowledge_base["default"]

# 5. MAIN APP UI
c1, c2 = st.columns([1, 6])
with c1:
    # Simple Logo Placeholder
    st.markdown("### üü¢") 
with c2:
    st.title("Sustainability Assistant")
    st.markdown("AI-powered lookup for the **2025 Impact Report**.")

st.divider()

# 6. CHAT LOGIC
if "messages" not in st.session_state:
    st.session_state.messages = [
        {"role": "assistant", "content": "Hello! Ask me about **Carbon**, **Plastics**, or **DfS**."}
    ]

# Display History
for msg in st.session_state.messages:
    with st.chat_message(msg["role"]):
        st.markdown(msg["content"])

# Handle User Input
if prompt := st.chat_input("Type a question (e.g., 'Tell me about Carbon')..."):
    # User Message
    st.session_state.messages.append({"role": "user", "content": prompt})
    with st.chat_message("user"):
        st.markdown(prompt)

    # Assistant Message
    with st.chat_message("assistant"):
        with st.spinner("Analyzing 2025 Report..."):
            time.sleep(0.8) # Simulation delay
            response_text = get_response(prompt)
            st.markdown(response_text)
    
    st.session_state.messages.append({"role": "assistant", "content": response_text})
`
        }
      },
      document.getElementById("root")
    );
    </script>
  </body>
</html>